#include "draw.h"

int main() {
    Keyboard keyboard;
    player.x = 4;
    player.y = 4;
    short current_map[ROWS][COLS];
    short Girl_house[ROWS][COLS] = {
            { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 15, 0, 0, 0, 10, 10, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 10, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 0, 0, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 13, 13, 13, 13, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 0, 0, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 13, 13, 13, 2, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 13, 13, 13, 13, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 13, 13, 13, 13, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 0, 4, 4, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 14, 14, 14, 14, 0, 0, 0, 0, 0, 0, 10, 10, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 10, 10, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ,0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
            { 1, 1, 1, 1, 1, 1, 1, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 }
        };

    // Assign the values of Girl_house to current_map
    memcpy(current_map, Girl_house, sizeof(Girl_house));

    
    while (true) {
        
        // Clear screen
        cout << clear_screen;

        draw_map(current_map);

        keyboard.get_userInput();
        
        int check_pressed_key = keyboard.key_pressed(keyboard.key);
        
        // Check if the key is pressed
        while (check_pressed_key) {
            keyboard.get_userInput();
        }
        
        if (keyboard.key == KEY_EXIT) {
            break;
        }
        if (keyboard.key == KEY_UP) {
            moveUp();
        }
        if (keyboard.key == KEY_DOWN) {
            moveDown();
        }
        if (keyboard.key == KEY_LEFT) {
            moveLeft();
        }
        if (keyboard.key == KEY_RIGHT) {
            moveRight();
        }

        // Move the player
        player_move(keyboard.key, current_map);
        player_collision(current_map);

        draw_map(current_map);
        
    }
}
